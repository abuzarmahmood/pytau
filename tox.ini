[tox]
envlist = py312
isolated_build = True

[testenv]
deps =
    pytest
    pymc==5.16.2
    numpyro==0.15.1
    arviz==0.18.0
    graphviz==0.20.3
    pytest-cov
    nbmake
    matplotlib
    jupyter
    nbconvert
commands =
    pytest {posargs:tests/} --cov=pytau --cov-report=term-missing
    # Note: nbmake tests require full dependencies and may fail in minimal environments
    # Run with: tox -- --nbmake-timeout=300 to increase timeout for slow notebooks
    - pytest --nbmake pytau/how_to/model_notebooks/ --nbmake-timeout=300
    - pytest --nbmake pytau/how_to/notebooks/ --nbmake-timeout=300
    - pytest --nbmake pytau/how_to/examples/ --nbmake-timeout=300

[pytest]
testpaths = tests
python_files = test_*.py
python_functions = test_*
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
